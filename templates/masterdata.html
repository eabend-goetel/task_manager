{% extends 'base.html' %}
{% block content %}
<h1>Stammdaten</h1>
<form method="post" class="row g-3">
  <div class="col-md-3">
    <select class="form-select" name="table">
      <option value="worker">Bearbeiter</option>
      <option value="priority">Prio</option>
      <option value="status">Status</option>
    </select>
  </div>
  <div class="col-md-3">
    <input type="text" class="form-control" name="name" placeholder="Name" required>
  </div>
  <div class="col-md-3">
    <input type="text" class="form-control" name="color" placeholder="Farbe (Bootstrap)">
  </div>
  <div class="col-md-3">
    <button class="btn btn-primary"><i class="bi bi-plus"></i> Hinzufügen</button>
  </div>
</form>
<div class="row mt-4">
  <div class="col-md-4">
    <h3>Bearbeiter</h3>
    <ul class="list-group">
    {% for w in workers %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        {{ w.name }}
        <span>
          <a href="{{ url_for('masterdata_edit', table='worker', item_id=w.id) }}" class="btn btn-sm btn-secondary"><i class="bi bi-pencil"></i></a>
          <form action="{{ url_for('masterdata_delete', table='worker', item_id=w.id) }}" method="post" style="display:inline" onsubmit="return confirm('Löschen?');">
            <button class="btn btn-sm btn-danger"><i class="bi bi-trash"></i></button>
          </form>
        </span>
      </li>
    {% endfor %}
    </ul>
  </div>
  <div class="col-md-4">
    <h3>Prio</h3>
    <ul class="list-group">
    {% for p in priorities %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        {{ p.name }} ({{ p.color }})
        <span>
          <a href="{{ url_for('masterdata_edit', table='priority', item_id=p.id) }}" class="btn btn-sm btn-secondary"><i class="bi bi-pencil"></i></a>
          <form action="{{ url_for('masterdata_delete', table='priority', item_id=p.id) }}" method="post" style="display:inline" onsubmit="return confirm('Löschen?');">
            <button class="btn btn-sm btn-danger"><i class="bi bi-trash"></i></button>
          </form>
        </span>
      </li>
    {% endfor %}
    </ul>
  </div>
  <div class="col-md-4">
    <h3>Status</h3>
    <ul class="list-group">
    {% for s in statuses %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        {{ s.name }} ({{ s.color }})
        <span>
          <a href="{{ url_for('masterdata_edit', table='status', item_id=s.id) }}" class="btn btn-sm btn-secondary"><i class="bi bi-pencil"></i></a>
          <form action="{{ url_for('masterdata_delete', table='status', item_id=s.id) }}" method="post" style="display:inline" onsubmit="return confirm('Löschen?');">
            <button class="btn btn-sm btn-danger"><i class="bi bi-trash"></i></button>
          </form>
        </span>
      </li>
    {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}
